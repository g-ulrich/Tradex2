(function(s,r){typeof exports=="object"&&typeof module<"u"?r(exports,require("lightweight-charts")):typeof define=="function"&&define.amd?define(["exports","lightweight-charts"],r):(s=typeof globalThis<"u"?globalThis:s||self,r(s.StackedAreaSeries={},s.LightweightCharts))})(this,function(s,r){"use strict";var A=Object.defineProperty;var D=(s,r,p)=>r in s?A(s,r,{enumerable:!0,configurable:!0,writable:!0,value:p}):s[r]=p;var y=(s,r,p)=>(D(s,typeof r!="symbol"?r+"":r,p),p);const p={...r.customSeriesDefaultOptions,colors:[{line:"rgb(41, 98, 255)",area:"rgba(41, 98, 255, 0.2)"},{line:"rgb(225, 87, 90)",area:"rgba(225, 87, 90, 0.2)"},{line:"rgb(242, 142, 44)",area:"rgba(242, 142, 44, 0.2)"},{line:"rgb(164, 89, 209)",area:"rgba(164, 89, 209, 0.2)"},{line:"rgb(27, 156, 133)",area:"rgba(27, 156, 133, 0.2)"}],lineWidth:2};function v(P){let t=0;return P.map(e=>{const a=t+e;return t=a,a})}class T{constructor(){y(this,"_data",null);y(this,"_options",null)}draw(t,e){t.useBitmapCoordinateSpace(a=>this._drawImpl(a,e))}update(t,e){this._data=t,this._options=e}_drawImpl(t,e){if(this._data===null||this._data.bars.length===0||this._data.visibleRange===null||this._options===null)return;const a=this._options,l=this._data.bars.map(h=>({x:h.x,ys:v(h.originalData.values).map(d=>e(d)??0)})),m=e(0)??0,x=this._createLinePaths(l,this._data.visibleRange,t,m*t.verticalPixelRatio),i=this._createAreas(x),f=a.colors.length;i.forEach((h,d)=>{t.context.fillStyle=a.colors[d%f].area,t.context.fill(h)}),t.context.lineWidth=a.lineWidth*t.verticalPixelRatio,t.context.lineJoin="round",x.forEach((h,d)=>{d!=0&&(t.context.beginPath(),t.context.strokeStyle=a.colors[(d-1)%f].line,t.context.stroke(h.path))})}_createLinePaths(t,e,a,l){const{horizontalPixelRatio:m,verticalPixelRatio:x}=a,i=[],f=[];let h=!0;for(let n=e.from;n<e.to;n++){const _=t[n];let o=0;_.ys.forEach((b,w)=>{if(w%2!==0)return;const c=_.x*m,u=b*x;h?(i[o]={path:new Path2D,first:{x:c,y:u},last:{x:c,y:u}},i[o].path.moveTo(c,u)):(i[o].path.lineTo(c,u),i[o].last.x=c,i[o].last.y=u),o+=1}),h=!1}h=!0;for(let n=e.to-1;n>=e.from;n--){const _=t[n];let o=0;_.ys.forEach((b,w)=>{if(w%2===0)return;const c=_.x*m,u=b*x;h?(f[o]={path:new Path2D,first:{x:c,y:u},last:{x:c,y:u}},f[o].path.moveTo(c,u)):(f[o].path.lineTo(c,u),f[o].last.x=c,f[o].last.y=u),o+=1}),h=!1}const d={path:new Path2D,first:{x:i[0].last.x,y:l},last:{x:i[0].first.x,y:l}};d.path.moveTo(i[0].last.x,l),d.path.lineTo(i[0].first.x,l);const g=[d];for(let n=0;n<i.length;n++)g.push(i[n]),n<f.length&&g.push(f[n]);return g}_createAreas(t){const e=[];for(let a=1;a<t.length;a++){const l=new Path2D(t[a-1].path);l.lineTo(t[a].first.x,t[a].first.y),l.addPath(t[a].path),l.lineTo(t[a-1].first.x,t[a-1].first.y),l.closePath(),e.push(l)}return e}}class k{constructor(){y(this,"_renderer");this._renderer=new T}priceValueBuilder(t){return[0,t.values.reduce((e,a)=>e+a,0)]}isWhitespace(t){var e;return!((e=t.values)!=null&&e.length)}renderer(){return this._renderer}update(t,e){this._renderer.update(t,e)}defaultOptions(){return p}}s.StackedAreaSeries=k,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
