(function(e,r){typeof exports=="object"&&typeof module<"u"?r(exports,require("lightweight-charts")):typeof define=="function"&&define.amd?define(["exports","lightweight-charts"],r):(e=typeof globalThis<"u"?globalThis:e||self,r(e.BackgroundShadeSeries={},e.LightweightCharts))})(this,function(e,r){"use strict";var B=Object.defineProperty;var S=(e,r,n)=>r in e?B(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n;var h=(e,r,n)=>(S(e,typeof r!="symbol"?r+"":r,n),n);const n={...r.customSeriesDefaultOptions,lowColor:"rgb(50, 50, 255)",highColor:"rgb(255, 50, 50)",lowValue:0,highValue:100,opacity:.8};function f(s,t,o){const c=s-t,l=s+t,a=Math.round(c*o),d=Math.round(l*o)-a;return{position:a,length:d}}function u(s){const t=s.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);if(!t)throw new Error("Invalid RGB string");return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)]}class g{constructor(t,o){h(this,"color1");h(this,"color2");this.color1=u(t),this.color2=u(o)}createInterpolator(t,o){const c=o-t,l=[this.color2[0]-this.color1[0],this.color2[1]-this.color1[1],this.color2[2]-this.color1[2]];return a=>{const i=(a-t)/c;return`rgb(${[Math.round(this.color1[0]+l[0]*i),Math.round(this.color1[1]+l[1]*i),Math.round(this.color1[2]+l[2]*i)].join(",")})`}}}class _{constructor(){h(this,"_data",null);h(this,"_options",null)}draw(t){t.useBitmapCoordinateSpace(o=>this._drawImpl(o))}update(t,o){this._data=t,this._options=o}_drawImpl(t){if(this._data===null||this._data.bars.length===0||this._data.visibleRange===null||this._options===null)return;const o=this._options,c=new g(o.lowColor,o.highColor).createInterpolator(o.lowValue,o.highValue),l=this._data.bars.map(i=>({color:c(i.originalData.value),x:i.x})),a=this._data.barSpacing/2;for(let i=this._data.visibleRange.from;i<this._data.visibleRange.to;i++){const d=l[i],p=f(d.x,a,t.horizontalPixelRatio),b=0,w=t.bitmapSize.height;t.context.fillStyle=d.color||"rgba(0, 0, 0, 0)",t.context.fillRect(p.position,b,p.length,w)}}}class m{constructor(){h(this,"_renderer");this._renderer=new _}priceValueBuilder(t){return[NaN]}isWhitespace(t){return t.value===void 0}renderer(){return this._renderer}update(t,o){this._renderer.update(t,o)}defaultOptions(){return n}}e.BackgroundShadeSeries=m,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});
